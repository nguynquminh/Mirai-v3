module.exports.config = {
	name: "help",
	version: "1.2.0",
	hasPermssion: 0,
	credits: "Mirai Team & Dollie",
	description: "Báº£ng trá»£ giÃºp Ä‘Ã¡ng yÃªu chá»©? chá»©?",
	commandCategory: "system",
	usages: "[tÃªn lá»‡nh]",
	cooldowns: 5,
	envConfig: {
		useCuteEmoji: true
	}
};

module.exports.languages = {
	"vi": {
		"moduleInfo": "ðŸŒ¸ ð—§ð—˜Ì‚ð—¡ ð—Ÿð—˜Ì£ð—¡ð—›: %1\nðŸ„ ð— ð—¼Ì‚ ð—§ð—”Ì‰: %2\n\nðŸ° ð—–ð—”Ìð—–ð—› ð——ð˜‚Ì€ð—»ð—´: %3\nðŸŽ€ ð——ð—®ð—»ð—µ ð—ºð˜‚Ì£ð—°: %4\nâ± ð—§ð—µð—¼Ì›Ì€ð—¶ ð—´ð—¶ð—®ð—» ð—°ð—µð—¼Ì›Ì€: %5 ð—´ð—¶ð—®Ì‚ð˜†\nðŸ” ð—¤ð˜‚ð˜†ð—²Ì‚Ì€ð—» ð—µð—®Ì£ð—»: %6\n\nðŸ§¸ ð—§ð—®Ìð—° ð—´ð—¶ð—®Ì‰: %7",
		"helpHeader": "ðŸŽ€ ð——ð—”ð—¡ð—› ð—¦ð—”Ìð—–ð—› ð—Ÿð—˜Ì£Ì‚ð—¡ð—› ð—–ð—¨Ì‰ð—” ð—•ð—¢ð—§ ðŸŽ€\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\n",
		"categoryTitle": "\nðŸ’ ð— ð—¨Ì£ð—– ð—Ÿð—˜Ì£Ì‚ð—¡ð—µ Â» %1\n",
		"commandItem": "âœ¨ ð—Ÿð—˜Ì£Ì‚ð—¡ð—›: %1 Â» ð—šð—µð—¶ ð—°ð—µð˜‚Ì: %2\n",
		"helpFooter": "\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸŒ¸ ð—šð—µð—¶ \"%1help + ð˜ð—²Ì‚ð—» ð—¹ð—²Ì£Ì‚ð—»ð—µ\" ð—±ð—²Ì‚Ì‰ ð˜…ð—²ð—º ð—°ð—µð—¶ ð˜ð—¶ð—²Ì‚Ìð˜ ð—»ð—µð—®ð—®ð—®~",
		"user": "ð—§ð—µð—®Ì€ð—»ð—µ ð˜ƒð—¶ð—²Ì‚ð—» ð—¯ð—¶Ì€ð—»ð—µ ð˜ð—µð˜‚Ì›ð—¼Ì›Ì€ð—»ð—´",
		"adminGroup": "ð—¤ð˜‚ð—®Ì‰ð—» ð˜ð—¿ð—¶Ì£ ð˜ƒð—µð—¼Ìð—º",
		"adminBot": "ð—¤ð˜‚ð—®Ì‰ð—» ð˜ð—¿ð—¶Ì£ ð—©ð—¶ð—²Ì‚ð—» ð—•ð—¼ð˜",
		"totalCommands": "ð—›ð—¶ð—²Ì£Ì‚ð—» ð—°ð—¼Ì tá»•ng cá»™ng %1 ð—¹ð—²Ì£Ì‚ð—»ð—µ ð—»ð—µð—® ðŸ’–"
	},
	"en": {
		"moduleInfo": "ðŸŒ¸ ð—–ð—¢ð— ð— ð—”ð—¡ð——: %1\nðŸ„ ð——ð—˜ð—¦ð—–ð—¥ð—œð—£ð—§ð—œð—¢ð—¡: %2\n\nðŸ° ð—¨ð—¦ð—”ð—šð—˜: %3\nðŸŽ€ ð—–ð—”ð—§ð—˜ð—šð—¢ð—¥ð—¬: %4\nâ± ð—–ð—¢ð—¢ð—Ÿð——ð—¢ð—ªð—¡: %5 ð—¦ð—˜ð—–ð—¢ð—¡ð——ð—¦\nðŸ” ð—£ð—˜ð—¥ð— ð—œð—¦ð—¦ð—œð—¢ð—¡: %6\n\nðŸ§¸ ð—”ð—¨ð—§ð—›ð—¢ð—¥: %7",
		"helpHeader": "ðŸŽ€ ð—•ð—¢ð—§ ð—–ð—¢ð— ð— ð—”ð—¡ð—— ð—Ÿð—œð—¦ð—§ ðŸŽ€\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\n",
		"categoryTitle": "\nðŸ’ ð—–ð—”ð—§ð—˜ð—šð—¢ð—¥ð—¬ Â» %1\n",
		"commandItem": "âœ¨ ð—–ð—¢ð— ð— ð—”ð—¡ð——: %1 Â» ð——ð—˜ð—¦ð—–: %2\n",
		"helpFooter": "\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸŒ¸ ð—§ð˜†ð—½ð—² \"%1help + ð—°ð—¼ð—ºð—ºð—®ð—»ð—± ð—»ð—®ð—ºð—²\" ð—³ð—¼ð—¿ ð—±ð—²ð˜ð—®ð—¶ð—¹ð˜€~",
		"user": "ð—¡ð—¼ð—¿ð—ºð—®ð—¹ ð—¨ð˜€ð—²ð—¿",
		"adminGroup": "ð—šð—¿ð—¼ð˜‚ð—½ ð—”ð—±ð—ºð—¶ð—»",
		"adminBot": "ð—•ð—¼ð˜ ð—”ð—±ð—ºð—¶ð—»",
		"totalCommands": "ð—¡ð—¼ð˜„ ð—µð—®ð˜ƒð—² %1 ð—°ð˜‚ð˜ð—² ð—°ð—¼ð—ºð—ºð—®ð—»ð—±ð˜€ ð˜‚ð˜€ð—®ð—¯ð—¹ð—² ðŸ’–"
	}
};

module.exports.run = function({ api, event, args, getText }) {
	const { commands } = global.client;
	const { threadID, messageID } = event;
	const threadSetting = global.data.threadData.get(parseInt(threadID)) || {};
	const prefix = threadSetting.PREFIX || global.config.PREFIX;
	
	// Xem chi tiáº¿t lá»‡nh
	if (args[0]) {
		const command = commands.get(args[0].toLowerCase());
		if (!command) {
			return api.sendMessage(`ðŸŒ¸ ð—žð—µð—¼Ì‚ð—»ð—´ ð˜ð—¶Ì€ð—º ð˜ð—µð—®Ì‚Ìð˜† ð—¹ð—²Ì£Ì‚ð—»ð—µ "${args[0]}" ð—»ð—µð—® ð—¯ð—²Ì ð—¼Ì›ð—¶~`, threadID, messageID);
		}
		
		const infoMessage = getText(
			"moduleInfo",
			command.config.name,
			command.config.description,
			`${prefix}${command.config.name} ${command.config.usages || ""}`.trim(),
			command.config.commandCategory,
			command.config.cooldowns,
			command.config.hasPermssion == 0 ? getText("user") : 
			command.config.hasPermssion == 1 ? getText("adminGroup") : getText("adminBot"),
			command.config.credits
		);
		
		return api.sendMessage(infoMessage, threadID, messageID);
	}

	// Hiá»ƒn thá»‹ toÃ n bá»™ danh sÃ¡ch
	let helpMessage = getText("helpHeader");
	const categories = {};
	
	// NhÃ³m lá»‡nh theo category
	commands.forEach(cmd => {
		const category = cmd.config.commandCategory;
		if (!categories[category]) {
			categories[category] = [];
		}
		categories[category].push(cmd);
	});

	// XÃ¢y dá»±ng message
	Object.entries(categories).forEach(([category, cmds]) => {
		helpMessage += getText("categoryTitle", category);
		cmds.forEach(cmd => {
			helpMessage += getText("commandItem", 
				cmd.config.name, 
				cmd.config.description
			);
		});
	});

	helpMessage += getText("helpFooter", prefix);
	helpMessage += "\n" + getText("totalCommands", commands.size);
	
	// Gá»­i tin nháº¯n
	return api.sendMessage(helpMessage, threadID, (err, info) => {
		if (this.config.envConfig.autoUnsend) {
			setTimeout(() => api.unsendMessage(info.messageID), this.config.envConfig.delayUnsend * 1000);
		}
	});
};